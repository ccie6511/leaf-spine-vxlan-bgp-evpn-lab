
hostname spine-1

feature bgp
feature ospf
feature nv overlay
feature vn-segment-vlan-based
feature pim
nv overlay evpn

router ospf UNDERLAY
  router-id 10.255.255.1

interface Ethernet1/1
  description P2P_UPLINK_TO_LEAF-1A_Ethernet1/3
  no switchport
  ip address 10.255.254.0/31
  mtu 9192
  ip router ospf UNDERLAY area 0.0.0.0
  ip ospf network point-to-point
  ip pim sparse-mode
  no shutdown
interface Ethernet1/2
  description P2P_UPLINK_TO_LEAF-1B_Ethernet1/3
  no switchport
  ip address 10.255.254.4/31
  mtu 9192
  ip router ospf UNDERLAY area 0.0.0.0
  ip ospf network point-to-point
  ip pim sparse-mode
  no shutdown
interface Ethernet1/3
  description P2P_UPLINK_TO_LEAF-2A_Ethernet1/3
  no switchport
  ip address 10.255.254.8/31
  mtu 9192
  ip router ospf UNDERLAY area 0.0.0.0
  ip ospf network point-to-point
  ip pim sparse-mode
  no shutdown
interface Ethernet1/4
  description P2P_UPLINK_TO_LEAF-2B_Ethernet1/3
  no switchport
  ip address 10.255.254.12/31
  mtu 9192
  ip router ospf UNDERLAY area 0.0.0.0
  ip ospf network point-to-point
  ip pim sparse-mode
  no shutdown
interface loopback0
  description router id
  ip address 10.255.255.1/32
  ip router ospf UNDERLAY area 0.0.0.0
interface loopback10
  description pim anycast
  ip address 10.255.253.10/32
  ip router ospf UNDERLAY area 0.0.0.0
  ip pim sparse-mode
interface loopback11
  description pim rp
  ip address 10.255.253.1/32
  ip router ospf UNDERLAY area 0.0.0.0
  ip pim sparse-mode

ip pim rp-address 10.255.253.10 group-list 224.0.0.0/4
ip pim anycast-rp 10.255.253.10 10.255.253.1
ip pim anycast-rp 10.255.253.10 10.255.253.2


router bgp 65500
  router-id 10.255.255.1
  address-family ipv4 unicast
  neighbor 10.255.255.11
    remote-as 65500
    description spine-1-Loopback-to-leaf-1A-Loopback
    update-source loopback0
    address-family l2vpn evpn
      send-community
      send-community extended
      route-reflector-client
  neighbor 10.255.255.12
    remote-as 65500
    description spine-1-Loopback-to-leaf-1B-Loopback
    update-source loopback0
    address-family l2vpn evpn
      send-community
      send-community extended
      route-reflector-client
  neighbor 10.255.255.13
    remote-as 65500
    description spine-1-Loopback-to-leaf-2A-Loopback
    update-source loopback0
    address-family l2vpn evpn
      send-community
      send-community extended
      route-reflector-client
  neighbor 10.255.255.14
    remote-as 65500
    description spine-1-Loopback-to-leaf-2B-Loopback
    update-source loopback0
    address-family l2vpn evpn
      send-community
      send-community extended
      route-reflector-client


